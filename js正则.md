# js正则表达式

正则表达式在线工具：http://regexper.com

js中通过内置对象RegExp支持正则表达式



##### 有两种方法实例化RegExp对象

1字面量

var reg = /\bis\b/g;

2构造函数

var reg = new RegExp('\\bis\\b','g')




##### 修饰符：
g：全文搜索，不添加搜索到第一个匹配停止

i：ignore case 忽略大小写

m:multiple lines 多行搜索




##### 元字符

-原意文本字符

元字符

正则表达式中有特殊含义的非字母字符

\b单词边界

.*+?$|\(){}[]

\t水平制表符

\v垂直制表符

\n换行符

\r回车符

\0空字符

\f换页符

\cX 与X对应的控制字符（Ctrl+X）


##### 字符类

一般情况下正则表达式一个字符对应字符串一个字符

表达式ab\t的含义是“ab”+tab

我们可以使用元字符[]来构建一个简单的类
所谓类就是符合某些特征的对象，一个泛指，而不是特指某个字节

表达式[abc]把字符a或b或c归为一类，表达式可以匹配这类字符

字符类取反[^abc]

范围类[a-z]、[a-zA-Z]

预定义类

.    等价类   [^\r\n]  
除了回车和换行符之外的所有字符

\d   等价类   [0-9]     数字字符

\D   等价类   [^0-9]    非数字字符

\s   等价类   [\t\n\x0B\f\r]   空白符

\S   等价类   [^\t\n\x0B\f\r]   非空白符

\w   等价类   [a-zA-Z_0-9]  
单词字符(字母数字下划线)

\W   等价类   [^a-zA-Z_0-9]   非单词字符
边界

^   以……开始

$   以……结束

\b   单词边界

\B   非单词边界



##### 量词
?  出现0次或一次

\+  出现一次或多次

\*  出现0次或多次

{n}  出现n次

{n,m}  出现n到m次

{n,}  至少出现n次



##### 贪婪模式(默认)
/\d{3,6}/g

12345678  =>  123456

这是会尽可能多的匹配直到匹配失败

##### 非贪婪模式

尽量少的匹配一旦成功不再尝试

在量词后加上?即可

/\d{3,6}?/g

12345678   =>  123  456  



##### 分组(aaasa){3}
用()可以达到分组的功能使量词用于分组
或aaa(s|e)a

反向引用

2015-12-25=>12/25/2015

'2015-12-25'.replace((/\d{4})-(\d{2})-(\d{2})/g,'$2/$3/$1')

忽略分组

不希望捕获某些分组，只需加上?:就可以
(?:Byron).(ok)只有(ok)一个组


##### 前瞻
正则表达式从文本头部向尾部开始解析，文本尾部方向，成为“前”

前瞻就是正则表达式匹配到规则的时候，向前检查是否符合断言，

后顾方向相反。js不支持后顾

符合和不符合特定断言称为 肯定/正向 匹配和 否定/负向 匹配

正向前瞻   exp(?=assert)

负向前瞻   exp(?!assert)

正向后顾   exp(?<=assert) js不支持

负向后顾   exp(?<!assert) js不支持

/\w(?=\d)/g



##### 对象属性
global:是否全文搜索，默认false

ignore case：是否大小写敏感，默认是false

multiline：多行搜索，默认是false

lastIndex：是当前表达式匹配内容的最后一个字符的下一个位置

source：正则表达式的文本字符串



##### RegExp.prototype.test(str)
加g全局匹配后每次匹配起点是上一次匹配结束位置

返回值true/false



##### RegExp.prototype.exec(str)
加g全局匹配后每次匹配起点是上一次匹配结束位置

使用正则表达式模式对字符串进行搜索，并将更新的全局RegExp对象的属性以反映匹配结果
如果没有匹配结果返回null，否则返回一个结果数组：

结果属性：

-index 声明匹配文本的第一个字符的位置

-input 存放被检索的字符串string

结果数组：

第一个元素是与正则表达式相匹配的文本

第二个元素是与RegExpObject的第一个子表达式(第一个分组)相匹配的文本(如果有)

第三个元素是与RegExpObject的第二个子表达式(第二个分组)相匹配的文本(如果有)

……




##### 字符串对象方法
##### String.propotype.search(reg)
用于检索字符串中指定的子字符串，或检索与正则表达式相匹配的子字符串

返回第一个匹配结果index查不到返回-1

search()方法不支持全局匹配，它将忽略标志g，并且总是从字符串的开始进行检索


##### String.propotype.match(reg)
match()方法将检索字符串，以找到一个或多个与regexp匹配的文本

regexp是否有g标志对结果影响很大

返回一个数组，没有返回null

非全局调用

结果属性：

-index 声明匹配文本的第一个字符的位置

-input 存放被检索的字符串string

结果数组：

第一个元素是与正则表达式相匹配的文本

第二个元素是与RegExpObject的第一个子表达式(第一个分组)相匹配的文本(如果有)

第三个元素是与RegExpObject的第二个子表达式(第二个分组)相匹配的文本(如果有)

……

全局调用

regexp有g标志，返回结果没有index，input属性

没有匹配返回null，有返回一个数组，数组中存放字符串中所有匹配的子字符


##### String.propotype.split(reg)

String.propotype.replace(reg,"")

String.propotype.replace(reg,function)
这个function有四个参数

1匹配字符串

2正则表达式分子内容，没有分组则没有该参数

3匹配项在字符串中的index

4原字符串






